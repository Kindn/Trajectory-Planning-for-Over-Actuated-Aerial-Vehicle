% !TEX root = ../main.tex

% 附录1
\chapter{罚函数中正求和项的梯度}\label{appdx:A}
% 设置附录页码从1开始编号
% \SetPageNumberingFromOne

\begin{align}
  & \frac{\partial I_{v_{ij}}}{\partial \bm{c}_i^{p}} = 
  6 W_v \frac{T_i}{\kappa} (\left\|\bm{v}\right\|_2^2 - v_{max}^2)^2 \bm{\beta}^{(1)}(\frac{j}{\kappa}T_i) \bm{v}^{\text{T}}
  \label{equ:Evdcp} \\
  & \frac{\partial I_{v_{ij}}}{\partial \bm{c}_i^{\sigma}} = \bm{0}
  \label{equ:Evdcs} \\ 
  & \frac{\partial I_{v_{ij}}}{\partial T_i} = 
  W_v \frac{(\left\|\bm{v}\right\|_2^2 - v_{max}^2)^2}{\kappa} \left[(\left\|\bm{v}\right\|_2^2 - v_{max}^2) + \frac{6jT_i}{\kappa}\bm{v}^{\text{T}}\bm{a}\right]
  \label{equ:EvdT}
\end{align}
\begin{align}
  & \frac{\partial I_{a_{ij}}}{\partial \bm{c}_i^{p}} = 
  6 W_a \frac{T_i}{\kappa} (\left\|\bm{a}\right\|_2^2 - a_{max}^2)^2 \bm{\beta}^{(2)}(\frac{j}{\kappa}T_i) \bm{a}^{\text{T}}
  \label{equ:Eadcp} \\
  & \frac{\partial I_{a_{ij}}}{\partial \bm{c}_i^{\sigma}} = \bm{0}
  \label{equ:Eadcs} \\ 
  & \frac{\partial I_{a_{ij}}}{\partial T_i} = 
  W_a \frac{(\left\|\bm{a}\right\|_2^2 - a_{max}^2)^2}{\kappa} \left[(\left\|\bm{a}\right\|_2^2 - a_{max}^2) + \frac{6jT_i}{\kappa}\bm{a}^{\text{T}}\bm{j}\right]
  \label{equ:EadT} 
\end{align}
\begin{align}
  & \pdiff{I_{\omega_{ij}}}{\bm{c}_i^{p}} = \textbf{0} 
  \label{equ:Eodcp} \\ 
  & \frac{\partial I_{\omega_{ij}}}{\partial \bm{c}_i^{\sigma}} = 
  6 W_{\omega} \frac{T_i}{\kappa} (\left\|\bm{\omega}\right\|_2^2 - \omega_{max}^2)^2 (\omega_x\pdiff{\omega_x}{\bm{c}_i^{\sigma}} + \omega_y\pdiff{\omega_y}{\bm{c}_i^{\sigma}} + \omega_z\pdiff{\omega_z}{\bm{c}_i^{\sigma}})
  \label{equ:Eodcs} \\ 
  & \frac{\partial I_{\omega_{ij}}}{\partial T_i} = 
  W_{\omega} \frac{(\left\|\bm{\omega}\right\|_2^2 - \omega_{max}^2)^2}{\kappa} \left[(\left\|\bm{\omega}\right\|_2^2 - \omega_{max}^2) + \frac{6T_i}{\kappa}\bm{\omega}^{\text{T}}\pdiff{\bm{\omega}}{T_i}\right]
\end{align}
\begin{align}
  & \frac{\partial I_{c_{ijvk}}}{\partial \bm{c}_i^{p}} = 
  \frac{3W_cT_i}{\kappa} (\bm{a}_{i,k}^{\text{T}}\bm{q}_v - b_{i,k})^2 \bm{\beta}(\frac{j}{\kappa}T_i)\bm{a}_{i,k}^{\text{T}}
  \label{equ:Ecdcp} \\
  & \left[\frac{\partial I_{c_{ijvk}}}{\partial \bm{c}_i^{\sigma}}\right]_{mn} = 
  \frac{3W_cT_i}{\kappa} (\bm{a}_{i,k}^{\text{T}}\bm{q}_v - b_{i,k})^2 \mathrm{tr}\left\{\hat{\bm{q}}_v\bm{a}_{i,k}^{\text{T}}\frac{\partial \bm{R}}{\partial [\bm{c}_i^{\sigma}]_{mn}}\right\}
  \label{equ:Ecdcp} \\
  & \frac{\partial I_{c_{ijvk}}}{\partial T_i} = 
  W_c \frac{(\bm{a}_{i,k}^{\text{T}}\bm{q}_v - b_{i,k})^2}{\kappa} \left[(\bm{a}_{i,k}^{\text{T}}\bm{q}_v - b_{i,k}) + 3T_i\left(\frac{j}{\kappa}\bm{a}_{i,k}^{\text{T}}{\bm{c}_i^{p}}^{\text{T}}\bm{\beta}^{(1)}(\frac{j}{\kappa}T_i)+\mathrm{tr}\left\{\hat{\bm{q}}_v\bm{a}_{i,k}^{\text{T}}\frac{\partial \bm{R}}{\partial T_i}\right\}\right)\right]
  \label{equ:EcdT}
\end{align}
式中$\bm{j}$为加加速度。